{"code":"!function(e){var o={};function t(n){if(o[n])return o[n].exports;var s=o[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:n})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&o&&\"string\"!=typeof e)for(var s in e)t.d(n,s,function(o){return e[o]}.bind(null,s));return n},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,\"a\",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p=\"\",t(t.s=39)}({13:function(e){e.exports=JSON.parse('{\"fbAPIHostname\":\"https://www.facebook.com\",\"mfbAPIHostname\":\"https://m.facebook.com\",\"businessfbAPIHostname\":\"https://business.facebook.com\",\"mBasicUrl\":\"https://mbasic.facebook.com\"}')},2:function(e,o,t){\"use strict\";t.r(o),t.d(o,\"fbDtsg\",(function(){return r})),t.d(o,\"fbAccessToken\",(function(){return i})),t.d(o,\"fbGrabRouteData\",(function(){return c})),t.d(o,\"fbGrabRouteMultiData\",(function(){return l})),t.d(o,\"aboutUs\",(function(){return d})),t.d(o,\"sentFrndRequest\",(function(){return u})),t.d(o,\"incomingFrndRequest\",(function(){return p})),t.d(o,\"incomingFrndRequestDeleter\",(function(){return _})),t.d(o,\"sentFrndRequestDeleter\",(function(){return f})),t.d(o,\"unfriend\",(function(){return g}));var n=(e,o=!1)=>{let t=e.replace(/for\\s*\\(\\s*;\\s*;\\s*\\)\\s*;\\s*/,\"\");o&&(t=t.replace(/for \\(;;\\);/g,\"\"));let n=o?t.split(/\\r\\n/g):t.split(/\\}\\r\\n *\\{/);return 1===n.length||o?n:\"[\"+n.join(\"},{\")+\"]\"},s=t(13);const a={routeDefinition:s.fbAPIHostname+\"/ajax/route-definition/\",bulkRouteDefinition:s.fbAPIHostname+\"/ajax/bulk-route-definitions/\",businessPage:s.businessfbAPIHostname+\"/creatorstudio/home\",loggedUserData:s.mfbAPIHostname+\"/composer/ocelot/async_loader/?publisher=feed\"},r=(e,o=null,t=null)=>{fetch(a.loggedUserData,{method:\"GET\"}).then(e=>e.text()).then(t=>{let n,s,a=\"\",r=\"\",i=\"\",c=\"\",l=!1;const d=/\\\\\"suggestions\\\\\":\\[\\{[^}]*\\}/gm,u=/\\\\\"dtsg\\\\\":\\{[^}]*\\}/gm;null!=t.match(u)&&(s=t.match(u)[0],s=\"{\"+s.replace(/[\\\\]/g,\"\")+\"}\",s=JSON.parse(s).dtsg);let p={};if(d.test(t)){n=t.match(d)[0],n=\"{\"+n.replace(/[\\\\]/g,\"\")+\"]}\",n=JSON.parse(n).suggestions[0],console.log(\"sugest in login helper\",n);let e=n.path.includes(\"profile.php\")?n.uid:n.path.replace(\"/\",\"\");i=n.uid,a=e,r=n.text,c=n.photo,l=!0,p={FacebookId:i,FacebookUsername:a,FacebookName:r,FacebookImage:c,LoggedInFacebook:l,dtsg:s}}else l=!1,p={FacebookId:i,FacebookUsername:a,FacebookName:r,FacebookImage:c,LoggedInFacebook:l,dtsg:s};if(\"function\"!=typeof o)return console.log(\"Here in dtsg function before callback else\"),{data:e,dtsg:s,sugest:n,parameters:p};console.log(\"Here in dtsg function before callback\"),o({data:e,dtsg:s,sugest:n,parameters:p})}).catch(n=>{console.log(\"Here in dtsg function error\",n),o&&o(e,null,t)})},i=(e=null)=>{fetch(a.businessPage,{method:\"GET\",mode:\"cors\",headers:{authority:\"business.facebook.com\",\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\"}}).then(e=>e.text()).then(o=>{const t=o.match(/\"userAccessToken\":\"(.*?)\"/);if(t&&Array.isArray(t)){let o=t[1];e(o,t)}}).catch(()=>{e&&e(null)})},c=async(e,o,t,s=null)=>{var r=new FormData;return r.append(\"fb_dtsg\",e),r.append(\"route_url\",o),r.append(\"client_previous_actor_id\",t),r.append(\"__user\",t),r.append(\"routing_namespace\",\"fb_comet\"),r.append(\"__comet_req\",1),r.append(\"__a\",1),r.append(\"dpr\",1),await fetch(a.routeDefinition,{body:r,headers:{accept:\"application/json, text/plain, */*\"},method:\"POST\"}).then(e=>e.text()).then(e=>{let o=n(e,!0);if(\"function\"!=typeof s)return{text:o.length?o[0]:\"\",parseAble:n(e),loggedUserId:t};s({text:o.length?o[0]:\"\",parseAble:o},t)})},l=async(e,o,t,s=null)=>{var r=new FormData;r.append(\"fb_dtsg\",e),o.forEach((e,o)=>{r.append(`route_urls[${o}]`,e)}),r.append(\"client_previous_actor_id\",t),r.append(\"__user\",t),r.append(\"routing_namespace\",\"fb_comet\"),r.append(\"__comet_req\",1),r.append(\"__a\",1),r.append(\"dpr\",1),fetch(a.bulkRouteDefinition,{body:r,headers:{accept:\"application/json, text/plain, */*\"},method:\"POST\"}).then(e=>e.text()).then(e=>{let o=n(e,!0);if(console.log(\"parsedData\",o),\"function\"!=typeof s)return{text:o.length?o[0]:\"\",parseAble:n(e),loggedUserId:t};s({text:o.length?o[0]:\"\",parseAble:o},t)})},d=(e,o=null)=>{r(null,t=>{l(t.dtsg.token,e,t.parameters.FacebookId,async t=>{console.log(\"routeDef\",t);let n=t.payload.payloads[e[0]].result.exports.hostableView.props.collectionToken,s=t.payload.payloads[e[0]].result.exports.hostableView.props.rawSectionToken,a=t.payload.payloads[e[0]].result.exports.hostableView.props.sectionToken,r=t.payload.payloads[e[0]].result.exports.hostableView.props.userID,i=(t.payload.payloads[e[0]].result.exports.hostableView.props.userVanity,t.payload.payloads[e[0]].result.exports.hostableView.props.viewerID,{collectionToken:n,appSectionFeedKey:\"ProfileCometAppSectionFeed_timeline_nav_app_sections__\"+s,rawSectionToken:s,pageID:r,scale:1,sectionToken:a,showReactions:!0,userID:r}),c={__a:\"1\",fb_dtsg:c.dtsg.token,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"ProfileCometAboutAppSectionQuery\",variables:JSON.stringify(i),doc_id:\"5018835244901653\"},l=await fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"ProfileCometAboutAppSectionQuery\"},body:function(e){let o=[];for(let t in e)e.hasOwnProperty(t)&&o.push(encodeURIComponent(t)+\"=\"+encodeURIComponent(e[t]));return o.join(\"&\")}(c)}),d=await l.text();o(d)})})},u=async(e=null,o,t=null)=>{let n=e?{scale:1}:{scale:2,cursor:e,count:20},s={__a:\"1\",fb_dtsg:o,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"FriendingCometOutgoingRequestsDialogQuery\",variables:JSON.stringify(n),doc_id:\"4197414966995373\",server_timestamps:!0},a=await fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"FriendingCometOutgoingRequestsDialogQuery\"},body:function(e){let o=[];for(let t in e)e.hasOwnProperty(t)&&o.push(encodeURIComponent(t)+\"=\"+encodeURIComponent(e[t]));return o.join(\"&\")}(s)}),r=await a.json(),i=0,c=[];if(r.data&&r.data.viewer&&r.data.viewer.outgoing_friend_requests_connection){let e=r.data.viewer;i=e.outgoing_friend_requests?e.outgoing_friend_requests.count:0,c=e.outgoing_friend_requests_connection.edges?e.outgoing_friend_requests_connection.edges:[],e.outgoing_friend_requests_connection.page_info&&e.outgoing_friend_requests_connection.page_info.has_next_page&&u(e.outgoing_friend_requests_connection.page_info.has_next_page.end_cursor,o,t)}t({totalSentRequest:i,sentRequestTo:c})},p=async(e=null,o,t=null)=>{let n=e?{scale:1}:{scale:2,cursor:e,count:20},s={__a:\"1\",fb_dtsg:o,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"FriendingCometFriendRequestsRootQuery\",variables:JSON.stringify(n),doc_id:\"4499164963466303\",server_timestamps:!0},a=await fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"FriendingCometFriendRequestsRootQuery\"},body:function(e){let o=[];for(let t in e)e.hasOwnProperty(t)&&o.push(encodeURIComponent(t)+\"=\"+encodeURIComponent(e[t]));return o.join(\"&\")}(s)}),r=await a.json(),i=0,c=[];if(r.data&&r.data.viewer&&r.data.viewer.friending_possibilities){let e=r.data.viewer;i=e.friend_requests?e.friend_requests.count:0,c=e.friending_possibilities?e.friending_possibilities.edges:[],e.friending_possibilities.page_info&&e.friending_possibilities.page_info.has_next_page&&p(e.friending_possibilities.page_info.has_next_page.end_cursor,o,t)}t({totalRecievedRequest:i,recievedRequestFrom:c})},_=async(e,o,t,n=null)=>{let s={input:{friend_requester_id:t,source:\"friends_tab\",actor_id:o,client_mutation_id:\"5\"},scale:1,refresh_num:0},a={__a:\"1\",fb_dtsg:e,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"FriendingCometFriendRequestDeleteMutation\",variables:JSON.stringify(s),doc_id:\"6031197466897287\",server_timestamps:!0},r=await fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"FriendingCometFriendRequestDeleteMutation\"},body:function(e){let o=[];for(let t in e)e.hasOwnProperty(t)&&o.push(encodeURIComponent(t)+\"=\"+encodeURIComponent(e[t]));return o.join(\"&\")}(a)}),i=await r.json(),c={};if(i.data&&i.data.friend_request_delete&&i.data.friend_request_delete.friend_requester){let e=i.data.friend_request_delete.friend_requester;e.id&&(c={...e})}n(c)},f=async(e,o,t,n=null)=>{let s={input:{cancelled_friend_requestee_id:t,source:\"manage_outgoing_requests\",actor_id:o,client_mutation_id:\"2\"},scale:1},a={__a:\"1\",fb_dtsg:e,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"FriendingCometFriendRequestCancelMutation\",variables:JSON.stringify(s),doc_id:\"4387092571315002\",server_timestamps:!0},r=await fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"FriendingCometFriendRequestCancelMutation\"},body:function(e){let o=[];for(let t in e)e.hasOwnProperty(t)&&o.push(encodeURIComponent(t)+\"=\"+encodeURIComponent(e[t]));return o.join(\"&\")}(a)}),i=await r.json(),c={};if(i.data&&i.data.friend_request_cancel&&i.data.friend_request_cancel.cancelled_friend_requestee){let e=i.data.friend_request_cancel.cancelled_friend_requestee;e.id&&(c={...e})}n(c)},g=async(e,o,t,n=null)=>{let s={shouldShowActivityLogDialog:!1,input:{source:\"bd_profile_button\",unfriended_user_id:t,actor_id:o},scale:1},a={__a:\"1\",fb_dtsg:e,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"FriendingCometUnfriendMutation\",variables:JSON.stringify(s),doc_id:\"4092953427497208\",server_timestamps:!0},r=await fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"FriendingCometOutgoingRequestsDialogQuery\"},body:function(e){let o=[];for(let t in e)e.hasOwnProperty(t)&&o.push(encodeURIComponent(t)+\"=\"+encodeURIComponent(e[t]));return o.join(\"&\")}(a)});n(await r.json())}},34:function(e,o,t){const{fbGrabRouteData:n}=t(2),s=(e,o,t)=>{try{let n={av:e,__user:e,__a:1,dpr:1,fb_dtsg:o,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"FriendingCometFriendsListPaginationQuery\",variables:JSON.stringify({count:30,cursor:t,name:null,scale:1}),server_timestamps:!0,doc_id:5393753507311167},s=[];for(let e in n)n.hasOwnProperty(e)&&s.push(encodeURIComponent(e)+\"=\"+encodeURIComponent(n[e]));return s.join(\"&\")}catch(e){}};e.exports={ScrapFacebookFriends:async function(e){let o=await s(e.FBuserId,e.dtsg,e.cursor);return new Promise((t,n)=>{setTimeout(()=>{fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"FriendingCometFriendsListPaginationQuery\"},body:o}).then(async o=>{let s=await o.json();s.hasOwnProperty(\"data\")?(console.log(\"==========3==================\",s.data),s.data.hasOwnProperty(\"viewer\")?(console.log(\"==========4==================\",s.data.viewer),s.data.viewer.hasOwnProperty(\"all_friends\")?(console.log(\"===========5=================\",s.data.viewer.all_friends),s.data.viewer.hasOwnProperty(\"all_friends\")?s.data.viewer.all_friends.hasOwnProperty(\"edges\")?s.data.viewer.all_friends.hasOwnProperty(\"page_info\")?t({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:s.data.viewer.all_friends.edges,end_cursor:s.data.viewer.all_friends.page_info.end_cursor,has_next_page:s.data.viewer.all_friends.page_info.has_next_page}):(t({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:s.data.viewer.all_friends.edges,end_cursor:\"\",has_next_page:!1}),n({success:!1,count:1})):n({success:!1,count:2}):n({success:!1,count:3})):n({success:!1,count:4})):n({success:!1,count:5})):n({success:!1,count:6})}).catch(e=>{console.log(\"Friend Counts Error\",e),n({success:!1,count:7})})},5e3)})},fetchCollectionToken:async(e,o,t)=>{const s=\"\"===t||Number.isInteger(parseInt(t))?`profile.php?id=${o}&sk=friends_all`:`/${t}/friends_all`;return new Promise(async(t,a)=>{try{const a=(await n(e,s,o)).text.match(/\"collectionToken\":\"(.*?)\"/);if(a&&Array.isArray(a)){t(a[1])}}catch(e){a(e)}})},ScrapSlowFacebookFriends:async function(e){console.log(\"ScrapSlowFacebookFriends\",e);const o=((e,o,t,n)=>{try{let s={av:e,__user:e,__a:1,dpr:1,fb_dtsg:o,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"ProfileCometAppCollectionListRendererPaginationQuery\",variables:JSON.stringify({count:20,cursor:t,search:null,scale:1,id:n}),server_timestamps:!0,doc_id:0xd8dac09faf5cd},a=[];for(let e in s)s.hasOwnProperty(e)&&a.push(encodeURIComponent(e)+\"=\"+encodeURIComponent(s[e]));return a.join(\"&\")}catch(e){}})(e.FBuserId,e.dtsg,e.cursor,e.collectionToken);return new Promise((t,n)=>{setTimeout(()=>{fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{Accept:\"*/*\",\"content-type\":\"application/x-www-form-urlencoded\"},body:o}).then(async o=>{let s=await o.json();s.hasOwnProperty(\"data\")?(console.log(\"==========33==================\",s.data),s.data.hasOwnProperty(\"node\")?(console.log(\"==========44==================\",s.data.node),s.data.node.hasOwnProperty(\"pageItems\")?(console.log(\"===========55=================\",s.data.node.pageItems),s.data.node.pageItems.hasOwnProperty(\"edges\")?(console.log(\"===========66=================\",s.data.node.pageItems.edges),s.data.node.pageItems.hasOwnProperty(\"page_info\")?t({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:s.data.node.pageItems.edges,end_cursor:s.data.node.pageItems.page_info.end_cursor,has_next_page:s.data.node.pageItems.page_info.has_next_page}):(t({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:s.data.node.pageItems.edges,end_cursor:\"\",has_next_page:!1}),n({success:!1,count:1}))):n({success:!1,count:3})):n({success:!1,count:4})):n({success:!1,count:5})):n({success:!1,count:6})}).catch(e=>{console.log(\"Friend Counts Error\",e),n({success:!1,count:7})})},5e3)})},ScrapNewSlowFacebookFriends:async function(e){let o=await s(e.FBuserId,e.dtsg,e.cursor,e.collectionToken);return console.log(o),new Promise((t,n)=>{setTimeout(()=>{fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"FriendingCometFriendsListPaginationQuery\"},body:o}).then(async o=>{let s=await o.json();s.hasOwnProperty(\"data\")?(console.log(\"==========3==================\",s.data),s.data.hasOwnProperty(\"viewer\")?(console.log(\"==========4==================\",s.data.viewer),s.data.viewer.hasOwnProperty(\"all_friends\")?(console.log(\"===========5=================\",s.data.viewer.all_friends),s.data.viewer.hasOwnProperty(\"all_friends\")?s.data.viewer.all_friends.hasOwnProperty(\"edges\")?s.data.viewer.all_friends.hasOwnProperty(\"page_info\")?t({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:s.data.viewer.all_friends.edges,end_cursor:s.data.viewer.all_friends.page_info.end_cursor,has_next_page:s.data.viewer.all_friends.page_info.has_next_page}):(t({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:s.data.viewer.all_friends.edges,end_cursor:\"\",has_next_page:!1}),n({success:!1,count:1})):n({success:!1,count:2}):n({success:!1,count:3})):n({success:!1,count:4})):n({success:!1,count:5})):n({success:!1,count:6})}).catch(e=>{console.log(\"Friend Counts Error\",e),n({success:!1,count:7})})},2e3)})},fetchFacebookFriendDetails:async function(e){await serializeFBFDetails(e.FriendFacebookid,e.ProfileURL,e.UserFacebookId,e.UserdtsgToken)},getAboutFriend:e=>{console.log(\"This is x\",e);let o=\"\";o=-1!=e.ProfileURL.indexOf(\"?id=\")?e.ProfileURL+\"&sk=about_overview\":e.ProfileURL+\"/about_overview\"}}},39:function(e,o,t){\"use strict\";t.r(o);var n=t(34),s=t(2);var a=e=>JSON.stringify(e);const r=\"post\";chrome.storage.local.set({tabInfo:{isBlocked:!1,tabId:0},isFirstTime:!0});const i=(e,o,t)=>fetch(\"http://localhost:8081\"+e,{method:o,headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",\"Access-Control-Allow-Origin\":!0},body:t});chrome.alarms.onAlarm.addListener((async function(e){e.name.startsWith(\"removeSentReq\")?chrome.storage.local.get([\"removeSentReq\"],({removeSentReq:e})=>{if(e.length){let o=e.pop();d(o),chrome.storage.local.set({removeSentReq:e})}else chrome.alarms.clear(\"removeSentReq\")}):e.name.startsWith(\"removeRequesteeReq\")?chrome.storage.local.get([\"removeRequesteeReq\"],({removeRequesteeReq:e})=>{if(e.length){let o=e.pop();u(o),chrome.storage.local.set({removeRequesteeReq:e})}else chrome.alarms.clear(\"removeRequesteeReq\")}):e.name.startsWith(\"aboutUs\")?chrome.storage.local.get([\"aboutUs\"],({aboutUs:e})=>{if(e.length){let o=e.pop();p(o),chrome.storage.local.set({aboutUs:e})}else chrome.alarms.clear(\"aboutUs\")}):e.name.startsWith(\"unfriend\")&&chrome.storage.local.get([\"unfriend\"],({unfriend:e})=>{if(e.length){let o=e.pop();_(o),chrome.storage.local.set({unfriend:e})}else chrome.alarms.clear(\"unfriend\")})})),chrome.runtime.onMessageExternal.addListener((async function(e,o,t){if(console.log(\"This is the Sender\",o),console.log(\"This is the request\",e),console.log(\"This is the sendResponse\",t),\"GetUserFaceBookAuth\"===e.type)Object(s.fbDtsg)(null,async o=>{if(o.parameters.LoggedInFacebook){console.log(\"GetUserFaceBookAuth: Logged in User Data\",o.parameters),console.log(\"GetUserFaceBookAuth: DTSG\",o.dtsg);let t=await Object(n.fetchCollectionToken)(o.parameters.dtsg.token,o.parameters.FacebookId,o.parameters.FacebookUsername);console.log(\"GetUserFaceBookAuth: Collection Token\",t);let s={user_id:e.options._id,kyubi_user_token:e.options.kyubi_user_token,UserFacebookName:o.parameters.FacebookName,UserFacebookid:o.parameters.FacebookId,UserdtsgToken:o.parameters.dtsg.token,UserFacebookImage:o.parameters.FacebookImage,UserFacebookUsername:o.parameters.FacebookUsername,UserdtsgExpire:o.parameters.dtsg.expire,access_token:o.dtsg.token,UsercollectionToken:t};await i(\"/api/user/CheckThenStoreProfileInfo\",r,a(s)).then(async e=>{console.log(\"GetUserFaceBookAuth: Response from server\",e),await e.json()}).catch(e=>{})}else{let o={user_id:e.options._id,kyubi_user_token:e.options.kyubi_user_token,UserFacebookName:!1,UserFacebookid:!1,UserdtsgToken:!1,UserFacebookImage:!1,UserFacebookUsername:!1,UserdtsgExpire:!1,access_token:!1};await i(\"/api/user/CheckThenStoreProfileInfo\",r,a(o)).then(async e=>{console.log(\"GetUserFaceBookAuth: Response from server in else part\",e),await e.json()}).catch(e=>{})}});else if(\"GetFacebookFriends\"===e.type){let o={dtsg:e.options.UserdtsgToken,FBuserId:e.options.UserFacebookid,kyubi_user_token:e.options.kyubi_user_token,User_id:e.options._id,cursor:e.options.end_cursor,collectionToken:e.options.UsercollectionToken,profileId:e.options.UserProfileId};await async function e(o,t=!0){await Object(n.ScrapFacebookFriends)(o).then(async n=>{if(console.log(\"GetFacebookFriends::CallBaseFacebookAPIToGetFriend ===>\",n),!0===n.success){let s=[],c={};if(await n.friends.map(async e=>{s.push({friend:e.node}),c={dtsg:o.dtsg,FBuserId:o.FBuserId,kyubi_user_token:o.kyubi_user_token,User_id:o.User_id,cursor:e.cursor,collectionToken:o.collectionToken,profileId:o.profileId}}),!0===n.has_next_page){let l={totalFriends:0,friends:s,kyubi_user_token:o.kyubi_user_token,User_id:o.User_id,has_next_page:n.has_next_page,FBuserId:o.FBuserId,profileId:o.profileId};t&&await i(\"/api/friend/StoreUserFriends\",r,a(l)).then(async e=>{console.log(\"GetFacebookFriends::CallBaseFacebookAPIToGetFriend: Response from server\",e),await e.json()}).catch(e=>{console.log(\"GetFacebookFriends::CallBaseFacebookAPIToGetFriend: found error in fetching the Profile Info\",e)}),await e(c,t)}else{let l={totalFriends:0,friends:s,kyubi_user_token:o.kyubi_user_token,User_id:o.User_id,has_next_page:n.has_next_page,FBuserId:o.FBuserId,profileId:o.profileId};t?await i(\"/api/friend/StoreUserFriends\",r,a(l)).then(async e=>{console.log(\"GetFacebookFriends::CallBaseFacebookAPIToGetFriend: Response from server to save data after last data from facebook\",e),await e.json();let t={dtsg:o.dtsg,FBuserId:o.FBuserId,kyubi_user_token:o.kyubi_user_token,User_id:o.User_id,cursor:null,collectionToken:o.collectionToken,profileId:o.profileId};console.log(\"SlowNewpayload\",t),await async function e(o){await ScrapSlowFacebookFriends(o).then(async t=>{if(console.log(\"This Is what I got from Facebook =============\",t),!0===t.success){let n=[],s={};if(await t.friends.map(async e=>{n.push({friend:e.node}),s={dtsg:o.dtsg,FBuserId:o.FBuserId,kyubi_user_token:o.kyubi_user_token,User_id:o.User_id,cursor:e.cursor,collectionToken:o.collectionToken,profileId:o.profileId}}),!0===t.has_next_page){let c={totalFriends:0,friends:n,kyubi_user_token:o.kyubi_user_token,User_id:o.User_id,has_next_page:t.has_next_page,FBuserId:o.FBuserId,profileId:o.profileId};await i(\"/api/friend/StoreUserFriends\",r,a(c)).then(async e=>{console.log(\"This is the Data I have To Send Back\",e);await e.json()}).catch(e=>{console.log(\"We are really Sorry we found error in fetching the Profile Info\",e)}),await e(s)}else{let e={totalFriends:0,friends:n,kyubi_user_token:o.kyubi_user_token,User_id:o.User_id,has_next_page:t.has_next_page,FBuserId:o.FBuserId};await i(\"/api/friend/StoreUserFriends\",r,a(e)).then(async e=>{console.log(\"This is the Data I have To Send Back\",e);await e.json(),o.dtsg,o.FBuserId,o.kyubi_user_token,o.User_id,o.collectionToken,o.profileId}).catch(e=>{console.log(\"We are really Sorry we found error in fetching the Profile Info\",e)}),console.log(\"This are the friends Request i have\",n)}}})}(t)}).catch(e=>{console.log(\"We are really Sorry we found error in fetching the Profile Info\",e)}):(c.cursor=null,await e(c)),console.log(\"This are the friends Request i have\",s)}}})}(o,!1)}else if(\"GetFriendsFaceBookDetails\"===e.type)console.log(e.options),await e.options.map(async(e,o)=>{20===o&&(console.log(\"This is the Friend Info\",e),await getAboutFriend(e))});else if(\"GetIncomingRequestDetails\"===e.type)c();else if(\"GetSentRequestDetails\"===e.type)l();else if(\"RemoveSentReq\"===e.type){let o=e.facebookIds;chrome.storage.local.set({removeSentReq:o},()=>{chrome.alarms.create(\"removeSentReq\",{when:(new Date).getTime(),periodInMinutes:2})})}else if(\"RemoveRequesteeReq\"===e.type){let o=e.facebookIds;chrome.storage.local.set({removeRequesteeReq:o},()=>{chrome.alarms.create(\"removeRequesteeReq\",{when:(new Date).getTime(),periodInMinutes:2})})}else if(\"about-us\"===e.type){let o=e.facebookIds;chrome.storage.local.set({aboutUs:o},()=>{chrome.alarms.create(\"aboutUs\",{when:(new Date).getTime(),periodInMinutes:2})})}else if(\"unfriend\"===e.type){let o=e.facebookIds;chrome.storage.local.set({unfriend:o},()=>{chrome.alarms.create(\"unfriend\",{when:(new Date).getTime(),periodInMinutes:2})})}}));const c=()=>{Object(s.fbDtsg)(null,e=>{e.dtsg&&e.dtsg.token&&Object(s.incomingFrndRequest)(null,e.dtsg.token,e=>{console.log(e)})})},l=()=>{Object(s.fbDtsg)(null,e=>{e.dtsg&&e.dtsg.token&&Object(s.sentFrndRequest)(null,e.dtsg.token,e=>{console.log(e)})})},d=e=>{Object(s.fbDtsg)(null,o=>{o.dtsg&&o.dtsg.token&&o.parameters.FacebookId&&Object(s.incomingFrndRequestDeleter)(o.dtsg.token,o.parameters.FacebookId,e,e=>{console.log(e)})})},u=e=>{Object(s.fbDtsg)(null,o=>{o.dtsg&&o.dtsg.token&&o.parameters.FacebookId&&Object(s.sentFrndRequestDeleter)(o.dtsg.token,o.parameters.FacebookId,e,e=>{console.log(e)})})},p=e=>{e.length&&Object(s.aboutUs)(e,e=>{console.log(e)})},_=e=>{Object(s.fbDtsg)(null,o=>{o.dtsg&&o.dtsg.token&&o.parameters.FacebookId&&Object(s.unfriend)(o.dtsg.token,o.parameters.FacebookId,e,e=>{console.log(e)})})};p([\"/iabhisekbosepm/about_contact_and_basic_info\"])}});","extractedComments":[]}