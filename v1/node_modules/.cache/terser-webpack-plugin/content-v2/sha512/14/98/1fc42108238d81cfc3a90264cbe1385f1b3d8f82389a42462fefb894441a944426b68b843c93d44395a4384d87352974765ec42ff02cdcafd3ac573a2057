{"code":"!function(e){var o={};function s(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=o,s.d=function(e,o,t){s.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:t})},s.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},s.t=function(e,o){if(1&o&&(e=s(e)),8&o)return e;if(4&o&&\"object\"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,\"default\",{enumerable:!0,value:e}),2&o&&\"string\"!=typeof e)for(var r in e)s.d(t,r,function(o){return e[o]}.bind(null,r));return t},s.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(o,\"a\",o),o},s.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},s.p=\"\",s(s.s=38)}({33:function(e,o,s){const{fbGrabRouteData:t}=s(4),r=(e,o,s)=>{try{let t={av:e,__user:e,__a:1,dpr:1,fb_dtsg:o,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"FriendingCometFriendsListPaginationQuery\",variables:JSON.stringify({count:30,cursor:s,name:null,scale:1}),server_timestamps:!0,doc_id:5393753507311167},r=[];for(let e in t)t.hasOwnProperty(e)&&r.push(encodeURIComponent(e)+\"=\"+encodeURIComponent(t[e]));return r.join(\"&\")}catch(e){}};e.exports={ScrapFacebookFriends:async function(e){let o=await r(e.FBuserId,e.dtsg,e.cursor);return new Promise((s,t)=>{setTimeout(()=>{fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"FriendingCometFriendsListPaginationQuery\"},body:o}).then(async o=>{let r=await o.json();r.hasOwnProperty(\"data\")?(console.log(\"==========3==================\",r.data),r.data.hasOwnProperty(\"viewer\")?(console.log(\"==========4==================\",r.data.viewer),r.data.viewer.hasOwnProperty(\"all_friends\")?(console.log(\"===========5=================\",r.data.viewer.all_friends),r.data.viewer.hasOwnProperty(\"all_friends\")?r.data.viewer.all_friends.hasOwnProperty(\"edges\")?r.data.viewer.all_friends.hasOwnProperty(\"page_info\")?s({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:r.data.viewer.all_friends.edges,end_cursor:r.data.viewer.all_friends.page_info.end_cursor,has_next_page:r.data.viewer.all_friends.page_info.has_next_page}):(s({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:r.data.viewer.all_friends.edges,end_cursor:\"\",has_next_page:!1}),t({success:!1,count:1})):t({success:!1,count:2}):t({success:!1,count:3})):t({success:!1,count:4})):t({success:!1,count:5})):t({success:!1,count:6})}).catch(e=>{console.log(\"Friend Counts Error\",e),t({success:!1,count:7})})},5e3)})},fetchCollectionToken:async(e,o,s)=>{const r=\"\"===s||Number.isInteger(parseInt(s))?`profile.php?id=${o}&sk=friends_all`:`/${s}/friends_all`;return new Promise(async(s,n)=>{try{const n=(await t(e,r,o)).text.match(/\"collectionToken\":\"(.*?)\"/);if(n&&Array.isArray(n)){s(n[1])}}catch(e){n(e)}})},ScrapSlowFacebookFriends:async function(e){console.log(\"ScrapSlowFacebookFriends\",e);const o=((e,o,s,t)=>{try{let r={av:e,__user:e,__a:1,dpr:1,fb_dtsg:o,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"ProfileCometAppCollectionListRendererPaginationQuery\",variables:JSON.stringify({count:20,cursor:s,search:null,scale:1,id:t}),server_timestamps:!0,doc_id:0xd8dac09faf5cd},n=[];for(let e in r)r.hasOwnProperty(e)&&n.push(encodeURIComponent(e)+\"=\"+encodeURIComponent(r[e]));return n.join(\"&\")}catch(e){}})(e.FBuserId,e.dtsg,e.cursor,e.collectionToken);return new Promise((s,t)=>{setTimeout(()=>{fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{Accept:\"*/*\",\"content-type\":\"application/x-www-form-urlencoded\"},body:o}).then(async o=>{let r=await o.json();r.hasOwnProperty(\"data\")?(console.log(\"==========33==================\",r.data),r.data.hasOwnProperty(\"node\")?(console.log(\"==========44==================\",r.data.node),r.data.node.hasOwnProperty(\"pageItems\")?(console.log(\"===========55=================\",r.data.node.pageItems),r.data.node.pageItems.hasOwnProperty(\"edges\")?(console.log(\"===========66=================\",r.data.node.pageItems.edges),r.data.node.pageItems.hasOwnProperty(\"page_info\")?s({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:r.data.node.pageItems.edges,end_cursor:r.data.node.pageItems.page_info.end_cursor,has_next_page:r.data.node.pageItems.page_info.has_next_page}):(s({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:r.data.node.pageItems.edges,end_cursor:\"\",has_next_page:!1}),t({success:!1,count:1}))):t({success:!1,count:3})):t({success:!1,count:4})):t({success:!1,count:5})):t({success:!1,count:6})}).catch(e=>{console.log(\"Friend Counts Error\",e),t({success:!1,count:7})})},5e3)})},ScrapNewSlowFacebookFriends:async function(e){let o=await r(e.FBuserId,e.dtsg,e.cursor,e.collectionToken);return console.log(o),new Promise((s,t)=>{setTimeout(()=>{fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"FriendingCometFriendsListPaginationQuery\"},body:o}).then(async o=>{let r=await o.json();r.hasOwnProperty(\"data\")?(console.log(\"==========3==================\",r.data),r.data.hasOwnProperty(\"viewer\")?(console.log(\"==========4==================\",r.data.viewer),r.data.viewer.hasOwnProperty(\"all_friends\")?(console.log(\"===========5=================\",r.data.viewer.all_friends),r.data.viewer.hasOwnProperty(\"all_friends\")?r.data.viewer.all_friends.hasOwnProperty(\"edges\")?r.data.viewer.all_friends.hasOwnProperty(\"page_info\")?s({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:r.data.viewer.all_friends.edges,end_cursor:r.data.viewer.all_friends.page_info.end_cursor,has_next_page:r.data.viewer.all_friends.page_info.has_next_page}):(s({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:r.data.viewer.all_friends.edges,end_cursor:\"\",has_next_page:!1}),t({success:!1,count:1})):t({success:!1,count:2}):t({success:!1,count:3})):t({success:!1,count:4})):t({success:!1,count:5})):t({success:!1,count:6})}).catch(e=>{console.log(\"Friend Counts Error\",e),t({success:!1,count:7})})},2e3)})},fetchFacebookFriendDetails:async function(e){await serializeFBFDetails(e.FriendFacebookid,e.ProfileURL,e.UserFacebookId,e.UserdtsgToken)},getAboutFriend:e=>{console.log(\"This is x\",e);let o=\"\";o=-1!=e.ProfileURL.indexOf(\"?id=\")?e.ProfileURL+\"&sk=about_overview\":e.ProfileURL+\"/about_overview\"}}},38:function(e,o,s){\"use strict\";s.r(o);var t=s(33),r=s(4);var n=e=>JSON.stringify(e);const a=\"post\";chrome.storage.local.set({tabInfo:{isBlocked:!1,tabId:0},isFirstTime:!0});const i=(e,o,s)=>fetch(\"http://localhost:8081\"+e,{method:o,headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",\"Access-Control-Allow-Origin\":!0},body:s});chrome.runtime.onMessageExternal.addListener((async function(e,o,s){if(console.log(\"This is the Sender\",o),console.log(\"This is the request\",e),console.log(\"This is the sendResponse\",s),\"GetUserFaceBookAuth\"===e.type&&Object(r.fbDtsg)(null,async o=>{if(o.parameters.LoggedInFacebook){console.log(\"GetUserFaceBookAuth: Logged in User Data\",o.parameters),console.log(\"GetUserFaceBookAuth: DTSG\",o.dtsg);let s=await Object(t.fetchCollectionToken)(o.parameters.dtsg.token,o.parameters.FacebookId,o.parameters.FacebookUsername);console.log(\"GetUserFaceBookAuth: Collection Token\",s);let r={user_id:e.options._id,kyubi_user_token:e.options.kyubi_user_token,UserFacebookName:o.parameters.FacebookName,UserFacebookid:o.parameters.FacebookId,UserdtsgToken:o.parameters.dtsg.token,UserFacebookImage:o.parameters.FacebookImage,UserFacebookUsername:o.parameters.FacebookUsername,UserdtsgExpire:o.parameters.dtsg.expire,access_token:o.dtsg.token,UsercollectionToken:s};await i(\"/api/user/CheckThenStoreProfileInfo\",a,n(r)).then(async e=>{console.log(\"GetUserFaceBookAuth: Response from server\",e),await e.json()}).catch(e=>{})}else{let o={user_id:e.options._id,kyubi_user_token:e.options.kyubi_user_token,UserFacebookName:!1,UserFacebookid:!1,UserdtsgToken:!1,UserFacebookImage:!1,UserFacebookUsername:!1,UserdtsgExpire:!1,access_token:!1};await i(\"/api/user/CheckThenStoreProfileInfo\",a,n(o)).then(async e=>{console.log(\"GetUserFaceBookAuth: Response from server in else part\",e),await e.json()}).catch(e=>{})}}),\"GetFacebookFriends\"===e.type){let o={dtsg:e.options.UserdtsgToken,FBuserId:e.options.UserFacebookid,kyubi_user_token:e.options.kyubi_user_token,User_id:e.options._id,cursor:e.options.end_cursor,collectionToken:e.options.UsercollectionToken,profileId:e.options.UserProfileId};await async function e(o,s=!0){await Object(t.ScrapFacebookFriends)(o).then(async t=>{if(console.log(\"GetFacebookFriends::CallBaseFacebookAPIToGetFriend ===>\",t),!0===t.success){let r=[],c={};if(await t.friends.map(async e=>{r.push({friend:e.node}),c={dtsg:o.dtsg,FBuserId:o.FBuserId,kyubi_user_token:o.kyubi_user_token,User_id:o.User_id,cursor:e.cursor,collectionToken:o.collectionToken,profileId:o.profileId}}),!0===t.has_next_page){let d={totalFriends:0,friends:r,kyubi_user_token:o.kyubi_user_token,User_id:o.User_id,has_next_page:t.has_next_page,FBuserId:o.FBuserId,profileId:o.profileId};s&&await i(\"/api/friend/StoreUserFriends\",a,n(d)).then(async e=>{console.log(\"GetFacebookFriends::CallBaseFacebookAPIToGetFriend: Response from server\",e),await e.json()}).catch(e=>{console.log(\"GetFacebookFriends::CallBaseFacebookAPIToGetFriend: found error in fetching the Profile Info\",e)}),await e(c,s)}else{let d={totalFriends:0,friends:r,kyubi_user_token:o.kyubi_user_token,User_id:o.User_id,has_next_page:t.has_next_page,FBuserId:o.FBuserId,profileId:o.profileId};s?await i(\"/api/friend/StoreUserFriends\",a,n(d)).then(async e=>{console.log(\"GetFacebookFriends::CallBaseFacebookAPIToGetFriend: Response from server to save data after last data from facebook\",e),await e.json();let s={dtsg:o.dtsg,FBuserId:o.FBuserId,kyubi_user_token:o.kyubi_user_token,User_id:o.User_id,cursor:null,collectionToken:o.collectionToken,profileId:o.profileId};console.log(\"SlowNewpayload\",s),await async function e(o){await ScrapSlowFacebookFriends(o).then(async s=>{if(console.log(\"This Is what I got from Facebook =============\",s),!0===s.success){let t=[],r={};if(await s.friends.map(async e=>{t.push({friend:e.node}),r={dtsg:o.dtsg,FBuserId:o.FBuserId,kyubi_user_token:o.kyubi_user_token,User_id:o.User_id,cursor:e.cursor,collectionToken:o.collectionToken,profileId:o.profileId}}),!0===s.has_next_page){let c={totalFriends:0,friends:t,kyubi_user_token:o.kyubi_user_token,User_id:o.User_id,has_next_page:s.has_next_page,FBuserId:o.FBuserId,profileId:o.profileId};await i(\"/api/friend/StoreUserFriends\",a,n(c)).then(async e=>{console.log(\"This is the Data I have To Send Back\",e);await e.json()}).catch(e=>{console.log(\"We are really Sorry we found error in fetching the Profile Info\",e)}),await e(r)}else{let e={totalFriends:0,friends:t,kyubi_user_token:o.kyubi_user_token,User_id:o.User_id,has_next_page:s.has_next_page,FBuserId:o.FBuserId};await i(\"/api/friend/StoreUserFriends\",a,n(e)).then(async e=>{console.log(\"This is the Data I have To Send Back\",e);await e.json(),o.dtsg,o.FBuserId,o.kyubi_user_token,o.User_id,o.collectionToken,o.profileId}).catch(e=>{console.log(\"We are really Sorry we found error in fetching the Profile Info\",e)}),console.log(\"This are the friends Request i have\",t)}}})}(s)}).catch(e=>{console.log(\"We are really Sorry we found error in fetching the Profile Info\",e)}):(c.cursor=null,await e(c)),console.log(\"This are the friends Request i have\",r)}}})}(o,!1)}\"GetFriendsFaceBookDetails\"===e.type&&(console.log(e.options),await e.options.map(async(e,o)=>{20===o&&(console.log(\"This is the Friend Info\",e),await getAboutFriend(e))})),\"GetIncomingRequestDetails\"===e.type&&c(),\"GetSentRequestDetails\"===e.type&&d()})),c();const c=()=>{Object(r.fbDtsg)(null,e=>{e.dtsg&&incomingFrndRequest(null,e.dtsg,e=>{console.log(e)})})},d=()=>{Object(r.fbDtsg)(null,e=>{e.dtsg&&Object(r.sentFrndRequest)(null,e.dtsg,e=>{console.log(e)})})}},4:function(e,o){throw new Error('Module parse failed: Identifier \\'dtsg\\' has already been declared (259:8)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n| \\n| export const sentFrndRequest = (cursor = null, dtsg, callback = null) => {\\n>     let dtsg = dtsg;\\n|     let variables = cursor ? { \"scale\": 1 } : { \"scale\": 2, cursor: cursor, count: 20 }\\n|     let data = {')}});","extractedComments":[]}