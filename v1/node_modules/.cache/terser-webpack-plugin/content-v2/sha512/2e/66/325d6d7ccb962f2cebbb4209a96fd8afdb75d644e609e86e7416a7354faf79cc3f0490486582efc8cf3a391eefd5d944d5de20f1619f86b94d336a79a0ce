{"code":"!function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\",o(o.s=39)}({13:function(e){e.exports=JSON.parse('{\"fbAPIHostname\":\"https://www.facebook.com\",\"mfbAPIHostname\":\"https://m.facebook.com\",\"businessfbAPIHostname\":\"https://business.facebook.com\",\"mBasicUrl\":\"https://mbasic.facebook.com\"}')},2:function(e,t,o){\"use strict\";o.r(t),o.d(t,\"fbDtsg\",(function(){return r})),o.d(t,\"fbAccessToken\",(function(){return i})),o.d(t,\"fbGrabRouteData\",(function(){return c})),o.d(t,\"fbGrabRouteMultiData\",(function(){return l})),o.d(t,\"aboutUs\",(function(){return d})),o.d(t,\"sentFrndRequest\",(function(){return u})),o.d(t,\"incomingFrndRequest\",(function(){return p})),o.d(t,\"incomingFrndRequestDeleter\",(function(){return _})),o.d(t,\"sentFrndRequestDeleter\",(function(){return f})),o.d(t,\"unfriend\",(function(){return g}));var n=(e,t=!1)=>{let o=e.replace(/for\\s*\\(\\s*;\\s*;\\s*\\)\\s*;\\s*/,\"\");t&&(o=o.replace(/for \\(;;\\);/g,\"\"));let n=t?o.split(/\\r\\n/g):o.split(/\\}\\r\\n *\\{/);return 1===n.length||t?n:\"[\"+n.join(\"},{\")+\"]\"},s=o(13);const a={routeDefinition:s.fbAPIHostname+\"/ajax/route-definition/\",bulkRouteDefinition:s.fbAPIHostname+\"/ajax/bulk-route-definitions/\",businessPage:s.businessfbAPIHostname+\"/creatorstudio/home\",loggedUserData:s.mfbAPIHostname+\"/composer/ocelot/async_loader/?publisher=feed\"},r=(e,t=null,o=null)=>{fetch(a.loggedUserData,{method:\"GET\"}).then(e=>e.text()).then(o=>{let n,s,a=\"\",r=\"\",i=\"\",c=\"\",l=!1;const d=/\\\\\"suggestions\\\\\":\\[\\{[^}]*\\}/gm,u=/\\\\\"dtsg\\\\\":\\{[^}]*\\}/gm;null!=o.match(u)&&(s=o.match(u)[0],s=\"{\"+s.replace(/[\\\\]/g,\"\")+\"}\",s=JSON.parse(s).dtsg);let p={};if(d.test(o)){n=o.match(d)[0],n=\"{\"+n.replace(/[\\\\]/g,\"\")+\"]}\",n=JSON.parse(n).suggestions[0],console.log(\"sugest in login helper\",n);let e=n.path.includes(\"profile.php\")?n.uid:n.path.replace(\"/\",\"\");i=n.uid,a=e,r=n.text,c=n.photo,l=!0,p={FacebookId:i,FacebookUsername:a,FacebookName:r,FacebookImage:c,LoggedInFacebook:l,dtsg:s}}else l=!1,p={FacebookId:i,FacebookUsername:a,FacebookName:r,FacebookImage:c,LoggedInFacebook:l,dtsg:s};if(\"function\"!=typeof t)return console.log(\"Here in dtsg function before callback else\"),{data:e,dtsg:s,sugest:n,parameters:p};console.log(\"Here in dtsg function before callback\"),t({data:e,dtsg:s,sugest:n,parameters:p})}).catch(n=>{console.log(\"Here in dtsg function error\",n),t&&t(e,null,o)})},i=(e=null)=>{fetch(a.businessPage,{method:\"GET\",mode:\"cors\",headers:{authority:\"business.facebook.com\",\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\"}}).then(e=>e.text()).then(t=>{const o=t.match(/\"userAccessToken\":\"(.*?)\"/);if(o&&Array.isArray(o)){let t=o[1];e(t,o)}}).catch(()=>{e&&e(null)})},c=async(e,t,o,s=null)=>{var r=new FormData;return r.append(\"fb_dtsg\",e),r.append(\"route_url\",t),r.append(\"client_previous_actor_id\",o),r.append(\"__user\",o),r.append(\"routing_namespace\",\"fb_comet\"),r.append(\"__comet_req\",1),r.append(\"__a\",1),r.append(\"dpr\",1),await fetch(a.routeDefinition,{body:r,headers:{accept:\"application/json, text/plain, */*\"},method:\"POST\"}).then(e=>e.text()).then(e=>{let t=n(e,!0);if(\"function\"!=typeof s)return{text:t.length?t[0]:\"\",parseAble:n(e),loggedUserId:o};s({text:t.length?t[0]:\"\",parseAble:t},o)})},l=async(e,t,o,s=null)=>{var r=new FormData;r.append(\"fb_dtsg\",e),t.forEach((e,t)=>{r.append(`route_urls[${t}]`,e)}),r.append(\"client_previous_actor_id\",o),r.append(\"__user\",o),r.append(\"routing_namespace\",\"fb_comet\"),r.append(\"__comet_req\",1),r.append(\"__a\",1),r.append(\"dpr\",1),fetch(a.bulkRouteDefinition,{body:r,headers:{accept:\"application/json, text/plain, */*\"},method:\"POST\"}).then(e=>e.text()).then(e=>{let t=n(e,!0);if(\"function\"!=typeof s)return{text:t.length?t[0]:\"\",parseAble:n(e),loggedUserId:o};s({text:t.length?t[0]:\"\",parseAble:t.length&&\"object\"==typeof t?JSON.parse(t[0]):t},o)})},d=(e,t=null)=>{let o={};r(null,s=>{l(s.dtsg.token,e,s.parameters.FacebookId,async a=>{if(e.length&&a&&a.parseAble&&a.parseAble.payload&&a.parseAble.payload.payloads&&a.parseAble.payload.payloads[e[0]]&&a.parseAble.payload.payloads[e[0]].result&&a.parseAble.payload.payloads[e[0]].result.exports&&a.parseAble.payload.payloads[e[0]].result.exports.hostableView&&a.parseAble.payload.payloads[e[0]].result.exports.hostableView.props&&a.parseAble.payload.payloads[e[0]].result.exports.hostableView.props.collectionToken){let t=a.parseAble.payload.payloads[e[0]].result.exports.hostableView.props,r=t.collectionToken,i=t.rawSectionToken,c=t.sectionToken,l=t.userID,d={collectionToken:r,appSectionFeedKey:\"ProfileCometAppSectionFeed_timeline_nav_app_sections__\"+i,rawSectionToken:i,pageID:l,scale:1,sectionToken:c,showReactions:!0,userID:l},u={__a:\"1\",__user:t.viewerID,__comet_req:1,fb_dtsg:s.dtsg.token,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"ProfileCometAboutAppSectionQuery\",variables:JSON.stringify(d),doc_id:\"7745404085500329\"},p=function(e){let t=[];for(let o in e)e.hasOwnProperty(o)&&t.push(encodeURIComponent(o)+\"=\"+encodeURIComponent(e[o]));return t.join(\"&\")},_=await fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"ProfileCometAboutAppSectionQuery\"},body:p(u)}),f=await _.text();if(f=n(f,!0),f.length&&(f=JSON.parse(f[0]),f.data&&f.data.user&&f.data.user.about_app_section&&f.data.user.about_app_section.nodes&&f.data.user.about_app_section.nodes.length)){let e=f.data.user.about_app_section.nodes[0];if(e.activeCollections&&e.activeCollections.nodes&&e.activeCollections.nodes.length&&e.activeCollections.nodes[0].style_renderer&&e.activeCollections.nodes[0].style_renderer.profile_field_sections&&e.activeCollections.nodes[0].style_renderer.profile_field_sections.length){e.activeCollections.nodes[0].style_renderer.profile_field_sections.forEach(e=>{o[e.field_section_type]={title:e.title.text,profileFields:{}},e.profile_fields.nodes.forEach(t=>{\"null_state\"!==t.field_type&&(o[e.field_section_type].profileFields[t.field_type]={text:t.title.text})})})}}}t(o)})})},u=async(e=null,t,o=null)=>{let n=e?{scale:1}:{scale:2,cursor:e,count:20},s={__a:\"1\",fb_dtsg:t,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"FriendingCometOutgoingRequestsDialogQuery\",variables:JSON.stringify(n),doc_id:\"4197414966995373\",server_timestamps:!0},a=await fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"FriendingCometOutgoingRequestsDialogQuery\"},body:function(e){let t=[];for(let o in e)e.hasOwnProperty(o)&&t.push(encodeURIComponent(o)+\"=\"+encodeURIComponent(e[o]));return t.join(\"&\")}(s)}),r=await a.json(),i=0,c=[];if(r.data&&r.data.viewer&&r.data.viewer.outgoing_friend_requests_connection){let e=r.data.viewer;i=e.outgoing_friend_requests?e.outgoing_friend_requests.count:0,c=e.outgoing_friend_requests_connection.edges?e.outgoing_friend_requests_connection.edges:[],e.outgoing_friend_requests_connection.page_info&&e.outgoing_friend_requests_connection.page_info.has_next_page&&u(e.outgoing_friend_requests_connection.page_info.has_next_page.end_cursor,t,o)}o({totalSentRequest:i,sentRequestTo:c})},p=async(e=null,t,o=null)=>{let n=e?{scale:1}:{scale:2,cursor:e,count:20},s={__a:\"1\",fb_dtsg:t,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"FriendingCometFriendRequestsRootQuery\",variables:JSON.stringify(n),doc_id:\"4499164963466303\",server_timestamps:!0},a=await fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"FriendingCometFriendRequestsRootQuery\"},body:function(e){let t=[];for(let o in e)e.hasOwnProperty(o)&&t.push(encodeURIComponent(o)+\"=\"+encodeURIComponent(e[o]));return t.join(\"&\")}(s)}),r=await a.json(),i=0,c=[];if(r.data&&r.data.viewer&&r.data.viewer.friending_possibilities){let e=r.data.viewer;i=e.friend_requests?e.friend_requests.count:0,c=e.friending_possibilities?e.friending_possibilities.edges:[],e.friending_possibilities.page_info&&e.friending_possibilities.page_info.has_next_page&&p(e.friending_possibilities.page_info.has_next_page.end_cursor,t,o)}o({totalRecievedRequest:i,recievedRequestFrom:c})},_=async(e,t,o,n=null)=>{let s={input:{friend_requester_id:o,source:\"friends_tab\",actor_id:t,client_mutation_id:\"5\"},scale:1,refresh_num:0},a={__a:\"1\",fb_dtsg:e,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"FriendingCometFriendRequestDeleteMutation\",variables:JSON.stringify(s),doc_id:\"6031197466897287\",server_timestamps:!0},r=await fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"FriendingCometFriendRequestDeleteMutation\"},body:function(e){let t=[];for(let o in e)e.hasOwnProperty(o)&&t.push(encodeURIComponent(o)+\"=\"+encodeURIComponent(e[o]));return t.join(\"&\")}(a)}),i=await r.json(),c={};if(i.data&&i.data.friend_request_delete&&i.data.friend_request_delete.friend_requester){let e=i.data.friend_request_delete.friend_requester;e.id&&(c={...e})}n(c)},f=async(e,t,o,n=null)=>{let s={input:{cancelled_friend_requestee_id:o,source:\"manage_outgoing_requests\",actor_id:t,client_mutation_id:\"2\"},scale:1},a={__a:\"1\",fb_dtsg:e,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"FriendingCometFriendRequestCancelMutation\",variables:JSON.stringify(s),doc_id:\"4387092571315002\",server_timestamps:!0},r=await fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"FriendingCometFriendRequestCancelMutation\"},body:function(e){let t=[];for(let o in e)e.hasOwnProperty(o)&&t.push(encodeURIComponent(o)+\"=\"+encodeURIComponent(e[o]));return t.join(\"&\")}(a)}),i=await r.json(),c={};if(i.data&&i.data.friend_request_cancel&&i.data.friend_request_cancel.cancelled_friend_requestee){let e=i.data.friend_request_cancel.cancelled_friend_requestee;e.id&&(c={...e})}n(c)},g=async(e,t,o,n=null)=>{let s={shouldShowActivityLogDialog:!1,input:{source:\"bd_profile_button\",unfriended_user_id:o,actor_id:t},scale:1},a={__a:\"1\",fb_dtsg:e,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"FriendingCometUnfriendMutation\",variables:JSON.stringify(s),doc_id:\"4092953427497208\",server_timestamps:!0},r=await fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"FriendingCometOutgoingRequestsDialogQuery\"},body:function(e){let t=[];for(let o in e)e.hasOwnProperty(o)&&t.push(encodeURIComponent(o)+\"=\"+encodeURIComponent(e[o]));return t.join(\"&\")}(a)});n(await r.json())}},34:function(e,t,o){const{fbGrabRouteData:n}=o(2),s=(e,t,o)=>{try{let n={av:e,__user:e,__a:1,dpr:1,fb_dtsg:t,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"FriendingCometFriendsListPaginationQuery\",variables:JSON.stringify({count:30,cursor:o,name:null,scale:1}),server_timestamps:!0,doc_id:5393753507311167},s=[];for(let e in n)n.hasOwnProperty(e)&&s.push(encodeURIComponent(e)+\"=\"+encodeURIComponent(n[e]));return s.join(\"&\")}catch(e){}};e.exports={ScrapFacebookFriends:async function(e){let t=await s(e.FBuserId,e.dtsg,e.cursor);return new Promise((o,n)=>{setTimeout(()=>{fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"FriendingCometFriendsListPaginationQuery\"},body:t}).then(async t=>{let s=await t.json();s.hasOwnProperty(\"data\")?(console.log(\"==========3==================\",s.data),s.data.hasOwnProperty(\"viewer\")?(console.log(\"==========4==================\",s.data.viewer),s.data.viewer.hasOwnProperty(\"all_friends\")?(console.log(\"===========5=================\",s.data.viewer.all_friends),s.data.viewer.hasOwnProperty(\"all_friends\")?s.data.viewer.all_friends.hasOwnProperty(\"edges\")?s.data.viewer.all_friends.hasOwnProperty(\"page_info\")?o({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:s.data.viewer.all_friends.edges,end_cursor:s.data.viewer.all_friends.page_info.end_cursor,has_next_page:s.data.viewer.all_friends.page_info.has_next_page}):(o({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:s.data.viewer.all_friends.edges,end_cursor:\"\",has_next_page:!1}),n({success:!1,count:1})):n({success:!1,count:2}):n({success:!1,count:3})):n({success:!1,count:4})):n({success:!1,count:5})):n({success:!1,count:6})}).catch(e=>{console.log(\"Friend Counts Error\",e),n({success:!1,count:7})})},5e3)})},fetchCollectionToken:async(e,t,o)=>{const s=\"\"===o||Number.isInteger(parseInt(o))?`profile.php?id=${t}&sk=friends_all`:`/${o}/friends_all`;return new Promise(async(o,a)=>{try{const a=(await n(e,s,t)).text.match(/\"collectionToken\":\"(.*?)\"/);if(a&&Array.isArray(a)){o(a[1])}}catch(e){a(e)}})},ScrapSlowFacebookFriends:async function(e){console.log(\"ScrapSlowFacebookFriends\",e);const t=((e,t,o,n)=>{try{let s={av:e,__user:e,__a:1,dpr:1,fb_dtsg:t,fb_api_caller_class:\"RelayModern\",fb_api_req_friendly_name:\"ProfileCometAppCollectionListRendererPaginationQuery\",variables:JSON.stringify({count:20,cursor:o,search:null,scale:1,id:n}),server_timestamps:!0,doc_id:0xd8dac09faf5cd},a=[];for(let e in s)s.hasOwnProperty(e)&&a.push(encodeURIComponent(e)+\"=\"+encodeURIComponent(s[e]));return a.join(\"&\")}catch(e){}})(e.FBuserId,e.dtsg,e.cursor,e.collectionToken);return new Promise((o,n)=>{setTimeout(()=>{fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{Accept:\"*/*\",\"content-type\":\"application/x-www-form-urlencoded\"},body:t}).then(async t=>{let s=await t.json();s.hasOwnProperty(\"data\")?(console.log(\"==========33==================\",s.data),s.data.hasOwnProperty(\"node\")?(console.log(\"==========44==================\",s.data.node),s.data.node.hasOwnProperty(\"pageItems\")?(console.log(\"===========55=================\",s.data.node.pageItems),s.data.node.pageItems.hasOwnProperty(\"edges\")?(console.log(\"===========66=================\",s.data.node.pageItems.edges),s.data.node.pageItems.hasOwnProperty(\"page_info\")?o({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:s.data.node.pageItems.edges,end_cursor:s.data.node.pageItems.page_info.end_cursor,has_next_page:s.data.node.pageItems.page_info.has_next_page}):(o({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:s.data.node.pageItems.edges,end_cursor:\"\",has_next_page:!1}),n({success:!1,count:1}))):n({success:!1,count:3})):n({success:!1,count:4})):n({success:!1,count:5})):n({success:!1,count:6})}).catch(e=>{console.log(\"Friend Counts Error\",e),n({success:!1,count:7})})},5e3)})},ScrapNewSlowFacebookFriends:async function(e){let t=await s(e.FBuserId,e.dtsg,e.cursor,e.collectionToken);return console.log(t),new Promise((o,n)=>{setTimeout(()=>{fetch(\"https://www.facebook.com/api/graphql/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Accept:\"text/html,application/json\",\"x-fb-friendly-name\":\"FriendingCometFriendsListPaginationQuery\"},body:t}).then(async t=>{let s=await t.json();s.hasOwnProperty(\"data\")?(console.log(\"==========3==================\",s.data),s.data.hasOwnProperty(\"viewer\")?(console.log(\"==========4==================\",s.data.viewer),s.data.viewer.hasOwnProperty(\"all_friends\")?(console.log(\"===========5=================\",s.data.viewer.all_friends),s.data.viewer.hasOwnProperty(\"all_friends\")?s.data.viewer.all_friends.hasOwnProperty(\"edges\")?s.data.viewer.all_friends.hasOwnProperty(\"page_info\")?o({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:s.data.viewer.all_friends.edges,end_cursor:s.data.viewer.all_friends.page_info.end_cursor,has_next_page:s.data.viewer.all_friends.page_info.has_next_page}):(o({success:!0,count:0,kyubi_user_token:e.kyubi_user_token,User_id:e.User_id,friends:s.data.viewer.all_friends.edges,end_cursor:\"\",has_next_page:!1}),n({success:!1,count:1})):n({success:!1,count:2}):n({success:!1,count:3})):n({success:!1,count:4})):n({success:!1,count:5})):n({success:!1,count:6})}).catch(e=>{console.log(\"Friend Counts Error\",e),n({success:!1,count:7})})},2e3)})},fetchFacebookFriendDetails:async function(e){await serializeFBFDetails(e.FriendFacebookid,e.ProfileURL,e.UserFacebookId,e.UserdtsgToken)},getAboutFriend:e=>{console.log(\"This is x\",e);let t=\"\";t=-1!=e.ProfileURL.indexOf(\"?id=\")?e.ProfileURL+\"&sk=about_overview\":e.ProfileURL+\"/about_overview\"}}},39:function(e,t,o){\"use strict\";o.r(t);var n=o(34),s=o(2);var a=e=>JSON.stringify(e);const r=\"post\";chrome.storage.local.set({tabInfo:{isBlocked:!1,tabId:0},isFirstTime:!0});const i=(e,t,o)=>fetch(\"http://localhost:8081\"+e,{method:t,headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",\"Access-Control-Allow-Origin\":!0},body:o});chrome.alarms.onAlarm.addListener((async function(e){e.name.startsWith(\"removeSentReq\")?chrome.storage.local.get([\"removeSentReq\"],({removeSentReq:e})=>{if(e.length){let t=e.pop();d(t),chrome.storage.local.set({removeSentReq:e})}else chrome.alarms.clear(\"removeSentReq\")}):e.name.startsWith(\"removeRequesteeReq\")?chrome.storage.local.get([\"removeRequesteeReq\"],({removeRequesteeReq:e})=>{if(e.length){let t=e.pop();u(t),chrome.storage.local.set({removeRequesteeReq:e})}else chrome.alarms.clear(\"removeRequesteeReq\")}):e.name.startsWith(\"aboutUs\")?chrome.storage.local.get([\"aboutUs\"],({aboutUs:e})=>{if(e.length){let t=e.pop();p(t),chrome.storage.local.set({aboutUs:e})}else chrome.alarms.clear(\"aboutUs\")}):e.name.startsWith(\"unfriend\")&&chrome.storage.local.get([\"unfriend\"],({unfriend:e})=>{if(e.length){let t=e.pop();_(t),chrome.storage.local.set({unfriend:e})}else chrome.alarms.clear(\"unfriend\")})})),chrome.runtime.onMessageExternal.addListener((async function(e,t,o){if(console.log(\"This is the Sender\",t),console.log(\"This is the request\",e),console.log(\"This is the sendResponse\",o),\"GetUserFaceBookAuth\"===e.type)Object(s.fbDtsg)(null,async t=>{if(t.parameters.LoggedInFacebook){console.log(\"GetUserFaceBookAuth: Logged in User Data\",t.parameters),console.log(\"GetUserFaceBookAuth: DTSG\",t.dtsg);let o=await Object(n.fetchCollectionToken)(t.parameters.dtsg.token,t.parameters.FacebookId,t.parameters.FacebookUsername);console.log(\"GetUserFaceBookAuth: Collection Token\",o);let s={user_id:e.options._id,kyubi_user_token:e.options.kyubi_user_token,UserFacebookName:t.parameters.FacebookName,UserFacebookid:t.parameters.FacebookId,UserdtsgToken:t.parameters.dtsg.token,UserFacebookImage:t.parameters.FacebookImage,UserFacebookUsername:t.parameters.FacebookUsername,UserdtsgExpire:t.parameters.dtsg.expire,access_token:t.dtsg.token,UsercollectionToken:o};await i(\"/api/user/CheckThenStoreProfileInfo\",r,a(s)).then(async e=>{console.log(\"GetUserFaceBookAuth: Response from server\",e),await e.json()}).catch(e=>{})}else{let t={user_id:e.options._id,kyubi_user_token:e.options.kyubi_user_token,UserFacebookName:!1,UserFacebookid:!1,UserdtsgToken:!1,UserFacebookImage:!1,UserFacebookUsername:!1,UserdtsgExpire:!1,access_token:!1};await i(\"/api/user/CheckThenStoreProfileInfo\",r,a(t)).then(async e=>{console.log(\"GetUserFaceBookAuth: Response from server in else part\",e),await e.json()}).catch(e=>{})}});else if(\"GetFacebookFriends\"===e.type){let t={dtsg:e.options.UserdtsgToken,FBuserId:e.options.UserFacebookid,kyubi_user_token:e.options.kyubi_user_token,User_id:e.options._id,cursor:e.options.end_cursor,collectionToken:e.options.UsercollectionToken,profileId:e.options.UserProfileId};await async function e(t,o=!0){await Object(n.ScrapFacebookFriends)(t).then(async n=>{if(console.log(\"GetFacebookFriends::CallBaseFacebookAPIToGetFriend ===>\",n),!0===n.success){let s=[],c={};if(await n.friends.map(async e=>{s.push({friend:e.node}),c={dtsg:t.dtsg,FBuserId:t.FBuserId,kyubi_user_token:t.kyubi_user_token,User_id:t.User_id,cursor:e.cursor,collectionToken:t.collectionToken,profileId:t.profileId}}),!0===n.has_next_page){let l={totalFriends:0,friends:s,kyubi_user_token:t.kyubi_user_token,User_id:t.User_id,has_next_page:n.has_next_page,FBuserId:t.FBuserId,profileId:t.profileId};o&&await i(\"/api/friend/StoreUserFriends\",r,a(l)).then(async e=>{console.log(\"GetFacebookFriends::CallBaseFacebookAPIToGetFriend: Response from server\",e),await e.json()}).catch(e=>{console.log(\"GetFacebookFriends::CallBaseFacebookAPIToGetFriend: found error in fetching the Profile Info\",e)}),await e(c,o)}else{let l={totalFriends:0,friends:s,kyubi_user_token:t.kyubi_user_token,User_id:t.User_id,has_next_page:n.has_next_page,FBuserId:t.FBuserId,profileId:t.profileId};o?await i(\"/api/friend/StoreUserFriends\",r,a(l)).then(async e=>{console.log(\"GetFacebookFriends::CallBaseFacebookAPIToGetFriend: Response from server to save data after last data from facebook\",e),await e.json();let o={dtsg:t.dtsg,FBuserId:t.FBuserId,kyubi_user_token:t.kyubi_user_token,User_id:t.User_id,cursor:null,collectionToken:t.collectionToken,profileId:t.profileId};console.log(\"SlowNewpayload\",o),await async function e(t){await ScrapSlowFacebookFriends(t).then(async o=>{if(console.log(\"This Is what I got from Facebook =============\",o),!0===o.success){let n=[],s={};if(await o.friends.map(async e=>{n.push({friend:e.node}),s={dtsg:t.dtsg,FBuserId:t.FBuserId,kyubi_user_token:t.kyubi_user_token,User_id:t.User_id,cursor:e.cursor,collectionToken:t.collectionToken,profileId:t.profileId}}),!0===o.has_next_page){let c={totalFriends:0,friends:n,kyubi_user_token:t.kyubi_user_token,User_id:t.User_id,has_next_page:o.has_next_page,FBuserId:t.FBuserId,profileId:t.profileId};await i(\"/api/friend/StoreUserFriends\",r,a(c)).then(async e=>{console.log(\"This is the Data I have To Send Back\",e);await e.json()}).catch(e=>{console.log(\"We are really Sorry we found error in fetching the Profile Info\",e)}),await e(s)}else{let e={totalFriends:0,friends:n,kyubi_user_token:t.kyubi_user_token,User_id:t.User_id,has_next_page:o.has_next_page,FBuserId:t.FBuserId};await i(\"/api/friend/StoreUserFriends\",r,a(e)).then(async e=>{console.log(\"This is the Data I have To Send Back\",e);await e.json(),t.dtsg,t.FBuserId,t.kyubi_user_token,t.User_id,t.collectionToken,t.profileId}).catch(e=>{console.log(\"We are really Sorry we found error in fetching the Profile Info\",e)}),console.log(\"This are the friends Request i have\",n)}}})}(o)}).catch(e=>{console.log(\"We are really Sorry we found error in fetching the Profile Info\",e)}):(c.cursor=null,await e(c)),console.log(\"This are the friends Request i have\",s)}}})}(t,!1)}else if(\"GetFriendsFaceBookDetails\"===e.type)console.log(e.options),await e.options.map(async(e,t)=>{20===t&&(console.log(\"This is the Friend Info\",e),await getAboutFriend(e))});else if(\"GetIncomingRequestDetails\"===e.type)c();else if(\"GetSentRequestDetails\"===e.type)l();else if(\"RemoveSentReq\"===e.type){let t=e.facebookIds;chrome.storage.local.set({removeSentReq:t},()=>{chrome.alarms.create(\"removeSentReq\",{when:(new Date).getTime(),periodInMinutes:2})})}else if(\"RemoveRequesteeReq\"===e.type){let t=e.facebookIds;chrome.storage.local.set({removeRequesteeReq:t},()=>{chrome.alarms.create(\"removeRequesteeReq\",{when:(new Date).getTime(),periodInMinutes:2})})}else if(\"about-us\"===e.type){let t=e.facebookIds;chrome.storage.local.set({aboutUs:t},()=>{chrome.alarms.create(\"aboutUs\",{when:(new Date).getTime(),periodInMinutes:2})})}else if(\"unfriend\"===e.type){let t=e.facebookIds;chrome.storage.local.set({unfriend:t},()=>{chrome.alarms.create(\"unfriend\",{when:(new Date).getTime(),periodInMinutes:2})})}}));const c=()=>{Object(s.fbDtsg)(null,e=>{e.dtsg&&e.dtsg.token&&Object(s.incomingFrndRequest)(null,e.dtsg.token,e=>{console.log(e)})})},l=()=>{Object(s.fbDtsg)(null,e=>{e.dtsg&&e.dtsg.token&&Object(s.sentFrndRequest)(null,e.dtsg.token,e=>{console.log(e)})})},d=e=>{Object(s.fbDtsg)(null,t=>{t.dtsg&&t.dtsg.token&&t.parameters.FacebookId&&Object(s.incomingFrndRequestDeleter)(t.dtsg.token,t.parameters.FacebookId,e,e=>{console.log(e)})})},u=e=>{Object(s.fbDtsg)(null,t=>{t.dtsg&&t.dtsg.token&&t.parameters.FacebookId&&Object(s.sentFrndRequestDeleter)(t.dtsg.token,t.parameters.FacebookId,e,e=>{console.log(e)})})},p=e=>{e.length&&Object(s.aboutUs)(e,e=>{console.log(e)})},_=e=>{Object(s.fbDtsg)(null,t=>{t.dtsg&&t.dtsg.token&&t.parameters.FacebookId&&Object(s.unfriend)(t.dtsg.token,t.parameters.FacebookId,e,e=>{console.log(e)})})};p([\"/iabhisekbosepm/about_contact_and_basic_info\"])}});","extractedComments":[]}