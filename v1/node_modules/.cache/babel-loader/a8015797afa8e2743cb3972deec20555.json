{"ast":null,"code":"import _asyncToGenerator from\"/var/www/html/extensions/friender/extension/v1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/var/www/html/extensions/friender/extension/v1/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/var/www/html/extensions/friender/extension/v1/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/var/www/html/extensions/friender/extension/v1/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/var/www/html/extensions/friender/extension/v1/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/var/www/html/extensions/friender/extension/v1/node_modules/@babel/runtime/regenerator/index.js\";import React,{Component}from\"react\";import{Redirect,withRouter}from'react-router-dom';import logo from\"../../../images/logo.svg\";import{NavLink}from\"react-router-dom\";import plog from\"../../../images/avatar_a.png\";import sideMenuLogo from\"../../../images/side_menu.svg\";import SettingServices from\"../../../services/setting\";import LoadingLogo from\"../../../images/Loader.gif\";import loginHelper from\"../../../helper/loginHelper.js\";import{connect}from'react-redux';import{GetData}from\"../../../helper/helper\";import*as authAction from'../../../store/actions/Auth/authAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var header=/*#__PURE__*/function(_Component){_inherits(header,_Component);var _super=_createSuper(header);function header(props){var _this;_classCallCheck(this,header);_this=_super.call(this,props);_this.HideMenu=function(event){event.preventDefault();// console.log(this.props.shownav);\n_this.setState({openNavBar:false});};_this.autoSetting=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var gfs,payload,Token,LC,LO;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:gfs=chrome.storage.local;_this.setState({loader:true});payload={};// console.log(\"hiyy\",this.state.meven_status )\n_context2.next=5;return GetData('kyubi_user_token');case 5:Token=_context2.sent;if(_this.state.meven_status===0){_this.setState({meven_status:1});payload={update_load_status:1,kyubi_user_token:Token};LC=loginHelper.login();}else{_this.setState({meven_status:0});payload={update_load_status:0,kyubi_user_token:Token};LO=loginHelper.logout();}_context2.next=9;return SettingServices.updateLoadStatus(payload).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(result){var responsenewvalue,createStatePayload,default_message,autoresponder_status;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(result.data.code==1)){_context.next=34;break;}responsenewvalue=result.data;gfs.set({'kyubi_user_token':responsenewvalue.payload.UserInfo.kyubi_user_token});gfs.set({'user_id':responsenewvalue.payload.UserInfo.user_id});gfs.set({'fb_id':responsenewvalue.payload.UserInfo.facebook_id});gfs.set({'fb_username':responsenewvalue.payload.UserInfo.facebook_name});gfs.set({'fb_name':responsenewvalue.payload.UserInfo.facebook_profile_name});gfs.set({'fb_image':responsenewvalue.payload.UserInfo.facebook_image});if(responsenewvalue.payload.UserSettings.default_message){gfs.set({'default_message':responsenewvalue.payload.UserSettings.default_message});}else{gfs.set({'default_message':0});}if(responsenewvalue.payload.UserSettings.default_message_text){gfs.set({'default_message_text':responsenewvalue.payload.UserSettings.default_message_text});}else{gfs.set({'default_message_text':\"\"});}if(responsenewvalue.payload.UserSettings.autoresponder){gfs.set({'autoresponder':responsenewvalue.payload.UserSettings.autoresponder});}else{gfs.set({'autoresponder':0});}if(responsenewvalue.payload.UserSettings.default_time_delay){gfs.set({'default_time_delay':responsenewvalue.payload.UserSettings.default_time_delay});}gfs.set({'keywordsTally':responsenewvalue.payload.AutoResponderKeywords});createStatePayload=[];_context.next=16;return GetData('fb_username');case 16:createStatePayload['UserName']=_context.sent;_context.next=19;return GetData('fb_image');case 19:createStatePayload['UserImage']=_context.sent;_context.next=22;return GetData('fb_logged_id');case 22:createStatePayload['UserLoginFacebook']=_context.sent;_context.next=25;return GetData('autoresponder');case 25:createStatePayload['UserAutoResponder']=_context.sent;_context.next=28;return GetData('default_message');case 28:createStatePayload['UserDefaultMessage']=_context.sent;_this.props.setProfileInfo(createStatePayload);autoresponder_status=createStatePayload['UserAutoResponder'];default_message=createStatePayload['UserDefaultMessage'];_this.setState({autoresponder_status:autoresponder_status,default_message:default_message});_this.setState({loader:false});case 34:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}()).catch(function(error){_this.setState({loader:false});});case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref.apply(this,arguments);};}();_this.ShowMenu=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event){var gfs,fb_username,fb_image,autoresponder,default_message;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:gfs=chrome.storage.local;event.preventDefault();// console.log(this.props.shownav);\n_this.setState({openNavBar:true});_context3.next=5;return GetData('fb_username');case 5:fb_username=_context3.sent;_context3.next=8;return GetData('fb_image');case 8:fb_image=_context3.sent;_context3.next=11;return GetData('autoresponder');case 11:autoresponder=_context3.sent;_context3.next=14;return GetData('default_message');case 14:default_message=_context3.sent;// console.log(\"I am In Header\");\nif(fb_username){_this.setState({user_name:fb_username});}if(fb_image){_this.setState({user_image:fb_image});}if(autoresponder){if(autoresponder==\"1\"){_this.setState({meven_status:1});}_this.setState({autoresponder_status:autoresponder});}if(default_message){if(default_message==\"1\"){_this.setState({meven_status:1});}_this.setState({default_message:default_message});}case 19:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var fb_username,fb_image,autoresponder,default_message;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// console.log(\"I am in sidebar -- header1 =====\",this.props.ProfileInfo);\n// console.log(\"I am in sidebar -- header1 =====\",this.props.ProfileInfo.profileInfo);\n// console.log(\"I am in sidebar -- header1 =====\",this.props.ProfileInfo.profileInfo[\"UserImage\"]);\n// this.props.ProfileInfo.profileInfo[0].map(result=>{\n//   // console.log(\"User Name ===\",result)\n// })\n//const{UserLoginFacebook,UserAutoResponder,UserDefaultMessage} = this.props.ProfileInfo.profileInfo[0];\n// console.log(\"User Name ===\",NewPropsState.UserLoginFacebook)\n// console.log(\"User Name ===\",NewPropsState.UserAutoResponder)\n// console.log(\"User Name ===\",NewPropsState.UserDefaultMessage)\n_this.setState({loader:true});_context4.next=3;return GetData('fb_username');case 3:fb_username=_context4.sent;_context4.next=6;return GetData('fb_image');case 6:fb_image=_context4.sent;_context4.next=9;return GetData('autoresponder');case 9:autoresponder=_context4.sent;_context4.next=12;return GetData('default_message');case 12:default_message=_context4.sent;// console.log(\"I am In Header Auto  Responder\",autoresponder,\"Default Message\",default_message);\nif(_this.props.ProfileInfo.profileInfo[\"UserName\"]){_this.setState({user_name:_this.props.ProfileInfo.profileInfo[\"UserName\"]});}if(_this.props.ProfileInfo.profileInfo[\"UserImage\"]){_this.setState({user_image:_this.props.ProfileInfo.profileInfo[\"UserImage\"]});}if(_this.props.ProfileInfo.profileInfo[\"UserAutoResponder\"]){if(_this.props.ProfileInfo.profileInfo[\"UserAutoResponder\"]==\"1\"){_this.setState({meven_status:1});}_this.setState({autoresponder_status:_this.props.ProfileInfo.profileInfo[\"UserAutoResponder\"]});}if(_this.props.ProfileInfo.profileInfo[\"UserDefaultMessage\"]){if(_this.props.ProfileInfo.profileInfo[\"UserDefaultMessage\"]==\"1\"){_this.setState({meven_status:1});}_this.setState({default_message:_this.props.ProfileInfo.profileInfo[\"UserDefaultMessage\"]});}_this.setState({loader:false});case 18:case\"end\":return _context4.stop();}}},_callee4);}));_this.state={selected:_this.props.selectedtab,openNavBar:false,default_message:0,autoresponder_status:0,ready_for_activate:0,user_name:\"XXXXXX\",user_image:plog,meven_status:0,loader:false};return _this;}_createClass(header,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"gen_header\",children:[this.state.loader&&/*#__PURE__*/_jsx(\"div\",{className:\"after_login_refresh\",children:/*#__PURE__*/_jsx(\"img\",{src:process.kyubi.loader.preLoader,alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:/*#__PURE__*/_jsx(\"img\",{src:process.kyubi.logo.primary_logo,alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"hBtnWrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"slide_menu_click\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"side_click\",onClick:this.ShowMenu,children:/*#__PURE__*/_jsx(\"img\",{src:sideMenuLogo})}),/*#__PURE__*/_jsxs(\"div\",{className:this.state.openNavBar?\"slider_menu active\":\"slider_menu\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:this.HideMenu,className:\"cross\",children:\"X\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"after_log_profile\",children:[/*#__PURE__*/_jsx(\"img\",{src:this.state.user_image,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Welcome\"}),/*#__PURE__*/_jsx(\"h3\",{children:this.state.user_name})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"menunav\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(NavLink,{to:\"/dashboard\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/menuicon4.svg\"}),\" Dashboard\"]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(NavLink,{to:\"/logout\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/menuicon1.svg\"}),\" Logout\"]})})]})]})]})})]});}}]);return header;}(Component);/**\n * @mapStateToProps\n * grab the values from redux store\n */var mapStateToProps=function mapStateToProps(state){return{ProfileInfo:state.auth.payload};};/**\n* @mapDispatchToProps \n* sending the values to redux store\n*/var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setProfileInfo:function setProfileInfo(load){return dispatch(authAction.addProfileInfo(load));}};};export default connect(mapStateToProps,mapDispatchToProps)(withRouter(header));","map":null,"metadata":{},"sourceType":"module"}