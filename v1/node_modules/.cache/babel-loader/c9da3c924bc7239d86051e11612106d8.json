{"ast":null,"code":"import _toConsumableArray from\"/var/www/html/extensions/friender/extension/v1/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/var/www/html/extensions/friender/extension/v1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/var/www/html/extensions/friender/extension/v1/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/var/www/html/extensions/friender/extension/v1/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/var/www/html/extensions/friender/extension/v1/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/var/www/html/extensions/friender/extension/v1/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/var/www/html/extensions/friender/extension/v1/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/var/www/html/extensions/friender/extension/v1/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/var/www/html/extensions/friender/extension/v1/node_modules/@babel/runtime/regenerator/index.js\";import React,{Component}from\"react\";import{NavLink}from\"react-router-dom\";import AutoResponderService from\"../../../services/autoResponderServices\";import Sidebar from\"../Common/sidebar\";import ReactDOM from'react-dom';import{WithContext as ReactTags}from'react-tag-input';import{GetData}from\"../../../helper/helper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var KeyCodes={comma:188,enter:13};var delimiters=[KeyCodes.comma,KeyCodes.enter];var autoResponderEdit=/*#__PURE__*/function(_Component){_inherits(autoResponderEdit,_Component);var _super=_createSuper(autoResponderEdit);function autoResponderEdit(props){var _this;_classCallCheck(this,autoResponderEdit);_this=_super.call(this,props);_this.inputChangeHandller=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.autoSetting=function(){// console.log(\"hiyy\",this.state.auto_responder_status )\nif(_this.state.auto_responder_status===0){_this.setState({auto_responder_status:1});}else{_this.setState({auto_responder_status:0});}};_this.updateAutoResponderGroupHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var Token,payload;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({loader:true});event.preventDefault();// let Token=localStorage.getItem(\"kyubi_user_token\");\n_context.next=4;return GetData('kyubi_user_token');case 4:Token=_context.sent;payload={user_id:Token,auto_responder_id:_this.state.auto_responder_id,auto_responder_name:_this.state.auto_responder_name,auto_responder_keywords:_this.state.auto_responder_keywords,auto_responder_message:_this.state.auto_responder_message,auto_responder_status:_this.state.auto_responder_status};// console.log(\"This I am Getting\",payload)\nAutoResponderService.updateAutoResponder(payload).then(function(response){_this.setState({loader:false});_this.props.history.push('/autoresponder');});case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.backAutoResponderGroupHandler=function(event){_this.props.history.push('/autoresponder');};_this.state={auto_responder_id:\"\",auto_responder_name:\"\",auto_responder_keywords:[],auto_responder_message:\"\",auto_responder_status:0,loader:false};_this.handleDelete=_this.handleDelete.bind(_assertThisInitialized(_this));_this.handleAddition=_this.handleAddition.bind(_assertThisInitialized(_this));return _this;}_createClass(autoResponderEdit,[{key:\"handleDelete\",value:function handleDelete(i){var auto_responder_keywords=this.state.auto_responder_keywords;this.setState({auto_responder_keywords:auto_responder_keywords.filter(function(auto_responder_keyword,index){return index!==i;})});}},{key:\"handleAddition\",value:function handleAddition(auto_responder_keyword){this.setState(function(state){return{auto_responder_keywords:[].concat(_toConsumableArray(state.auto_responder_keywords),[auto_responder_keyword])};});}/**\n        * @inputChangeHandller \n        * getting input field values\n    */},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.setState({loader:true});var payload={Id:this.props.match.params.idfy};// console.log(payload);\nAutoResponderService.editAutoResponder(payload).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(response){var newKey;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(response.data.code===1)){_context3.next=5;break;}newKey=[];_context3.next=4;return response.data.payload[0].autoresponderkeywords.map(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(result,i){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// console.log(result.keywords);\nnewKey.push({\"id\":result.keywords,\"text\":result.keywords});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}());case 4:_this2.setState({auto_responder_id:response.data.payload[0]._id,auto_responder_name:response.data.payload[0].auto_responder_name,auto_responder_message:response.data.payload[0].message,auto_responder_status:response.data.payload[0].status,auto_responder_keywords:newKey,loader:false});case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref2.apply(this,arguments);};}()).catch(function(error){});}},{key:\"render\",value:function render(){var _jsx2;var auto_responder_keywords=this.state.auto_responder_keywords;return/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",children:[this.state.loader&&/*#__PURE__*/_jsx(\"div\",{className:\"overlay\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-2x fa-sync-alt fa-spin\"})}),/*#__PURE__*/_jsx(Sidebar,{selectedtab:\"setting\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-wrapper\",children:[/*#__PURE__*/_jsx(\"section\",{className:\"content-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row mb-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Auto-Responder\"})})})})}),/*#__PURE__*/_jsx(\"section\",{className:\"content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-primary\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:\" Create Auto-Responder\"})}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"exampleInputEmail1\",children:\"Auto-Responder Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"auto_responder_name\",className:\"form-control\",id:\"exampleInputEmail1\",placeholder:\"Auto-Responder Name\",value:this.state.auto_responder_name,onChange:this.inputChangeHandller})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"exampleInputEmail1\",children:\"Auto-Responder Keywords\"}),/*#__PURE__*/_jsx(ReactTags,{placeholder:\"Press enter Or Press , to Create Autoresponder Keywords\",tags:auto_responder_keywords,handleDelete:this.handleDelete,handleAddition:this.handleAddition,allowUnique:true,delimiters:delimiters})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"exampleInputEmail1\",children:\"Auto-Responder Response Message\"}),/*#__PURE__*/_jsx(\"textarea\",(_jsx2={name:\"auto_responder_message\",value:\"\",className:\"form-control\",rows:\"3\",placeholder:\"Please enter the response message....\"},_defineProperty(_jsx2,\"value\",this.state.auto_responder_message),_defineProperty(_jsx2,\"onChange\",this.inputChangeHandller),_jsx2))]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group clearfix\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"icheck-success d-inline\",children:[this.state.auto_responder_status?/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"checkboxPrimary3\",name:\"auto_responder_status\",onChange:this.autoSetting,checked:true}):/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"checkboxPrimary3\",name:\"auto_responder_status\",onChange:this.autoSetting}),/*#__PURE__*/_jsx(\"label\",{for:\"checkboxPrimary3\",children:\"Activate Auto-Responder\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:this.updateAutoResponderGroupHandler,children:\"Update\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-secondary  float-right\",onClick:this.backAutoResponderGroupHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"far fa-arrow-alt-circle-left\"}),\" Back\"]})]})]})]})})})})})]})]});}}]);return autoResponderEdit;}(Component);export default autoResponderEdit;","map":null,"metadata":{},"sourceType":"module"}